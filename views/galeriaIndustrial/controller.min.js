angular.module("inspinia").controller("CtrlIndustrial",["$rootScope","$scope","$state","$http","$stateParams","SweetAlert",function(a,e,o,t,r,n){e.loading=!0,t.get("php/galeria.php",{params:{iddireccion:6}}).success(function(a){e.galeria=a,e.loading=!1}),e.publicar=function(a,r){if(1==r)var i="¿Esta seguro que desea publicar la imagen?";else i="¿Esta seguro que desea remover la imagen?";n.swal({title:i,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&t({method:"POST",url:"php/galeria_publicar.php?idgaleria="+a+"&numero="+r,data:JSON.stringify(e.valores)}).success(function(a,e,t,r){o.go(o.current,{},{reload:!0})}).error(function(a,e,o,t){console.log("error al publicar la imagen")})})},e.eliminar=function(a,r){n.swal({title:"¿Esta seguro que desea eliminar la imagen?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&t({method:"POST",url:"php/galeria_eliminar.php?idgaleria="+a+"&ruta="+r,data:JSON.stringify(e.valores)}).success(function(a,e,t,r){o.go(o.current,{},{reload:!0})}).error(function(a,e,o,t){console.log("error al eliminar la imagen")})})}}]).controller("CtrlIndustrialAgregar",["$rootScope","$scope","$http","$stateParams","SweetAlert","$state","Upload",function(a,e,o,t,r,n,i){new Date;t.idgaleria||(e.forma={idgaleria:6,idusuario:a.datos.idusuario,activo:0,imagenes:[],rutas:[],iddireccion:6}),e.agregar=function(){e.loading=!0,i.upload({url:"php/galeria_agregar.php",data:e.forma,method:"POST"}).then(function(a){console.log(a),a.data.status&&n.go("galeria.galeriaIndustrial")},function(a){console.log("Error status: "+a.status)})}}]);