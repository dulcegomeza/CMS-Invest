angular.module("inspinia").controller("CtrlRural",["$rootScope","$scope","$state","$http","$stateParams","SweetAlert",function(a,e,r,o,t,n){e.loading=!0,o.get("php/galeria.php",{params:{iddireccion:7}}).success(function(a){e.galeria=a,e.loading=!1}),e.publicar=function(a,t){if(1==t)var i="¿Esta seguro que desea publicar la imagen?";else i="¿Esta seguro que desea remover la imagen?";n.swal({title:i,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&o({method:"POST",url:"php/galeria_publicar.php?idgaleria="+a+"&numero="+t,data:JSON.stringify(e.valores)}).success(function(a,e,o,t){r.go(r.current,{},{reload:!0})}).error(function(a,e,r,o){console.log("error al publicar la imagen")})})},e.eliminar=function(a,t){n.swal({title:"¿Esta seguro que desea eliminar la imagen?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&o({method:"POST",url:"php/galeria_eliminar.php?idgaleria="+a+"&ruta="+t,data:JSON.stringify(e.valores)}).success(function(a,e,o,t){r.go(r.current,{},{reload:!0})}).error(function(a,e,r,o){console.log("error al eliminar la imagen")})})}}]).controller("CtrlRuralAgregar",["$rootScope","$scope","$http","$stateParams","SweetAlert","$state","Upload",function(a,e,r,o,t,n,i){new Date;o.idgaleria||(e.forma={idgaleria:7,idusuario:a.datos.idusuario,activo:0,imagenes:[],rutas:[],iddireccion:7}),e.agregar=function(){e.loading=!0,i.upload({url:"php/galeria_agregar.php",data:e.forma,method:"POST"}).then(function(a){a.data.status&&n.go("galeria.galeriaRural")},function(a){console.log("Error status: "+a.status)})}}]);